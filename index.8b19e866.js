!function(){function t(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},r={},o=e.parcelRequire4cc0;null==o&&((o=function(t){if(t in n)return n[t].exports;if(t in r){var e=r[t];delete r[t];var o={id:t,exports:{}};return n[t]=o,e.call(o.exports,o,o.exports),o.exports}var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){r[t]=e},e.parcelRequire4cc0=o);var i=o.register;i("5fy9m",function(t,e){var n=o("bB0zn"),r=o("6QEWP"),i=o("kB67t"),u=o("2Xzd1"),a=/*#__PURE__*/function(){function t(e){(0,n._)(this,t),this.initialState=e?e.map(function(t){return(0,u._)(t)}):Array.from({length:4},function(){return[,,,,].fill(0)}),this.state=this._clone(this.initialState),this.score=0,this.status="idle",this.started=!1}return(0,r._)(t,[{key:"_clone",value:function(t){return t.map(function(t){return(0,u._)(t)})}},{key:"_getEmptyCells",value:function(){for(var t=[],e=0;e<4;e++)for(var n=0;n<4;n++)0===this.state[e][n]&&t.push([e,n]);return t}},{key:"_addRandomCell",value:function(){var t=this._getEmptyCells();if(t.length){var e=(0,i._)(t[Math.floor(Math.random()*t.length)],2),n=e[0],r=e[1];this.state[n][r]=.9>Math.random()?2:4}}},{key:"_transpose",value:function(t){return t[0].map(function(e,n){return t.map(function(t){return t[n]})})}},{key:"_reverseRows",value:function(t){return t.map(function(t){return(0,u._)(t).reverse()})}},{key:"_mergeRow",value:function(t){for(var e=t.filter(Boolean),n=[],r=0,o=0;o<e.length;o++)if(e[o]===e[o+1]){var i=2*e[o];n.push(i),r+=i,o++}else n.push(e[o]);for(;n.length<4;)n.push(0);return{row:n,score:r}}},{key:"_boardsEqual",value:function(t,e){return t.flat().every(function(t,n){return t===e.flat()[n]})}},{key:"_canMove",value:function(){var t=this.state;if(t.flat().includes(0))return!0;for(var e=0;e<4;e++)for(var n=0;n<3;n++)if(t[e][n]===t[e][n+1])return!0;for(var r=0;r<4;r++)for(var o=0;o<3;o++)if(t[o][r]===t[o+1][r])return!0;return!1}},{key:"getState",value:function(){return this._clone(this.state)}},{key:"getScore",value:function(){return this.score}},{key:"getStatus",value:function(){return this.status}},{key:"start",value:function(){"idle"===this.status&&(this.state=this._clone(this.state),this.status="playing",this._addRandomCell(),this._addRandomCell(),this.started=!0)}},{key:"restart",value:function(){this.state=this._clone(this.initialState),this.score=0,this.status="idle",this.started=!1}},{key:"_moveBase",value:function(t,e){var n=this,r=this._clone(t),o=0;("up"===e||"down"===e)&&(r=this._transpose(r)),("right"===e||"down"===e)&&(r=this._reverseRows(r));var i=r.map(function(t){var e=n._mergeRow(t),r=e.row,i=e.score;return o+=i,r});return("right"===e||"down"===e)&&(i=this._reverseRows(i)),("up"===e||"down"===e)&&(i=this._transpose(i)),{result:i,totalScore:o}}},{key:"_move",value:function(t){if(this.started&&"playing"===this.status){var e=this._moveBase(this.state,t),n=e.result,r=e.totalScore;if(!this._boardsEqual(this.state,n)){if(this.state=n,this.score+=r,this.state.flat().includes(2048)){this.status="win";return}this._addRandomCell(),this._canMove()||(this.status="lose")}}}},{key:"moveLeft",value:function(){this._move("left")}},{key:"moveRight",value:function(){this._move("right")}},{key:"moveUp",value:function(){this._move("up")}},{key:"moveDown",value:function(){this._move("down")}}]),t}();t.exports=a}),i("bB0zn",function(e,n){t(e.exports,"_",function(){return r});function r(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}}),i("6QEWP",function(e,n){function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}t(e.exports,"_",function(){return o})}),i("kB67t",function(e,n){t(e.exports,"_",function(){return s});var r=o("Q9cvz"),i=o("c4AWK"),u=o("dNApw"),a=o("ihB7G");function s(t,e){return(0,r._)(t)||(0,i._)(t,e)||(0,a._)(t,e)||(0,u._)()}}),i("Q9cvz",function(e,n){t(e.exports,"_",function(){return r});function r(t){if(Array.isArray(t))return t}}),i("c4AWK",function(e,n){t(e.exports,"_",function(){return r});function r(t,e){var n,r,o=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var i=[],u=!0,a=!1;try{for(o=o.call(t);!(u=(n=o.next()).done)&&(i.push(n.value),!e||i.length!==e);u=!0);}catch(t){a=!0,r=t}finally{try{u||null==o.return||o.return()}finally{if(a)throw r}}return i}}}),i("dNApw",function(e,n){t(e.exports,"_",function(){return r});function r(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}),i("ihB7G",function(e,n){t(e.exports,"_",function(){return i});var r=o("gNF1f");function i(t,e){if(t){if("string"==typeof t)return(0,r._)(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return(0,r._)(t,e)}}}),i("gNF1f",function(e,n){t(e.exports,"_",function(){return r});function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}}),i("2Xzd1",function(e,n){t(e.exports,"_",function(){return s});var r=o("gUOYc"),i=o("Q6yVl"),u=o("4S8xA"),a=o("ihB7G");function s(t){return(0,r._)(t)||(0,i._)(t)||(0,a._)(t)||(0,u._)()}}),i("gUOYc",function(e,n){t(e.exports,"_",function(){return i});var r=o("gNF1f");function i(t){if(Array.isArray(t))return(0,r._)(t)}}),i("Q6yVl",function(e,n){t(e.exports,"_",function(){return r});function r(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}}),i("4S8xA",function(e,n){t(e.exports,"_",function(){return r});function r(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}),o("5fy9m")}();
//# sourceMappingURL=index.8b19e866.js.map
